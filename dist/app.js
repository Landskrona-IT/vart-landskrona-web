(()=>{"use strict";const t=new URLSearchParams(window.location.search),e=t.get("formIdWeb"),n={urls:{ios:"https://apps.apple.com/se/app/ett-b%C3%A4ttre-helsingborg/id1061079182",android:"https://play.google.com/store/apps/details?id=se.helsingborg.EttBattreHelsingborg&hl=sv",noLink:"#nolink"},formIds:{app:t.get("formIdApp")||"vEKRiB3le1BSsgo18HW2",web:e||"U3X0lhXaQ4B2dBs2rk5K"}};class o{static setClassAndAria(t){const e=navigator.userAgent||navigator.vendor||window.opera;(this.isAndroid(e)||this.isIOS(e))&&(t.classList.remove("u-display--none"),t.removeAttribute("aria-hidden"))}static setLink(t){const e=navigator.userAgent||navigator.vendor||window.opera;(this.isAndroid(e)||this.isIOS(e))&&t.setAttribute("href",this.appUrl())}static isAndroid(t){return/android/i.test(t)}static isIOS(t){return/iPad|iPhone|iPod/i.test(t)}static isApp(){return"1"===new URLSearchParams(window.location.search).get("app")}static appUrl(){return this.isIOS()?n.urls.ios:this.isAndroid()?n.urls.android:n.urls.noLink}static formId(){return o.isApp()?n.formIds.app:n.formIds.web}}const s=o;const i=class{static initialize(){window.addEventListener("load",(function(){const t=document.getElementById("app-banner");t&&s.setClassAndAria(t)})),window.addEventListener("load",(function(){const t=document.getElementById("app-banner-link");t&&s.setLink(t)})),window.addEventListener("load",(function(){const t=document.querySelector("body");t&&s.isApp()&&t.classList.add("is-app")}))}};const a=class{static setupScroll(t){t.onReady((()=>{window.scrollTo(0,0)})),t.onStepChange(((t,e)=>{window.scrollTo(0,0)}))}};const r=class{static setupBackButton(t){t.onReady((()=>{const e=document.getElementById("back-button");e&&e.addEventListener("click",(function(e){e.preventDefault(),t.goToPrevStep()}))}))}};const d=class{static setupStepChange(t){t.onStepChange(((e,n)=>{const o=document.getElementById("back-button");o&&(0===n.index||t.steps.length===n.index?(o.classList.add("u-display--none"),o.setAttribute("aria-hidden","true")):(o.classList.remove("u-display--none"),o.removeAttribute("aria-hidden")))}))}};const c=class{static setupSubmitted(t){t.onSubmitted((()=>{window.scrollTo(0,0);const t=document.getElementById("back-button");t&&(t.classList.add("u-display--none"),t.setAttribute("aria-hidden","true"));const e=document.getElementById("cancel-button");e&&(e.classList.add("u-display--none"),e.setAttribute("aria-hidden","true"));const n=document.getElementById("close-button");n&&(n.classList.remove("u-display--none"),n.removeAttribute("aria-hidden"))}))}};const l=class{static isValidUrl=function(t){return/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([/\w.-]*)*\/?$/.test(t)};static reloadPage=function(t){t&&this.isValidUrl(t)?(opener||parent||window).location.href=t:(opener||parent||window).location.reload()}};const u=class{static setupCancelAndCloseButtons(){const t=document.getElementById("cancel-button");t&&t.addEventListener("click",(function(t){t.preventDefault();1==window.confirm("Är du säker på att du vill avbryta? All inmatad information förloras.")&&l.reloadPage(new URLSearchParams(window.location.search).get("closeUrl")??null)}));const e=document.getElementById("close-button");e&&e.addEventListener("click",(function(t){t.preventDefault(),l.reloadPage(new URLSearchParams(window.location.search).get("closeUrl")??null)}))}};const p=class{static initialize(){const t=window.limeForms.getApi();a.setupScroll(t),r.setupBackButton(t),d.setupStepChange(t),c.setupSubmitted(t),u.setupCancelAndCloseButtons(),t.onReady((function(){setTimeout((function(){document.querySelector(".loader").remove()}),1e3)}))}};const m=class{static initialize(){const t=document.getElementById("lime-form-template"),e=document.importNode(t.content,!0),n=e.querySelector("#lime-form");n?n.setAttribute("form-id",s.formId()):console.error("Error: Could not find form template.");const o=document.getElementById("app");o?(o.appendChild(e),p.initialize()):console.error("Error: Could not find app container.")}};i.initialize(),window.addEventListener("load",(function(){m.initialize()}))})();